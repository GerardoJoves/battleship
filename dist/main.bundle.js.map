{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://battleship/./src/utilities/events.js","webpack://battleship/./src/modules/ship.js","webpack://battleship/./src/modules/gameboard.js","webpack://battleship/./node_modules/lit-html/lit-html.js","webpack://battleship/./src/templates/coords.js","webpack://battleship/./src/event-handlers/attack-enemy.js","webpack://battleship/./src/templates/cell.js","webpack://battleship/./src/event-handlers/start-game.js","webpack://battleship/./src/templates/enemy-gameboard.js","webpack://battleship/./src/utilities/isValidCell.js","webpack://battleship/./src/event-handlers/drag-and-drop.js","webpack://battleship/./src/event-handlers/rotate-ship.js","webpack://battleship/./src/templates/draggable-ship.js","webpack://battleship/./src/event-handlers/randomise.js","webpack://battleship/./src/templates/player-gameboard.js","webpack://battleship/./src/modules/game.js","webpack://battleship/./src/templates/static-ship.js","webpack://battleship/./src/modules/player.js","webpack://battleship/./src/utilities/getNextMove.js","webpack://battleship/./src/modules/computer-player.js","webpack://battleship/./src/modules/game-against-computer.js","webpack://battleship/./src/index.js"],"sourcesContent":["const events = {\n  events: {},\n  on(eventName, fn) {\n    if (!this.events[eventName]) this.events[eventName] = [];\n    this.events[eventName].push(fn);\n  },\n  off(eventName, fn) {\n    if (this.events[eventName]) {\n      for (let i = 0; i < this.events[eventName].length; i++) {\n        if (this.events[eventName][i] === fn) {\n          this.events[eventName].splice(i, 1);\n          break;\n        }\n      }\n    }\n  },\n  emit(eventName, data) {\n    if (this.events[eventName]) {\n      this.events[eventName].forEach((fn) => fn(data));\n    }\n  },\n};\n\nexport default events;\n","export default class Ship {\n  constructor(length) {\n    this.length = length;\n    this.receivedHits = 0;\n  }\n\n  hit() {\n    if (this.isSunk()) return;\n    this.receivedHits += 1;\n  }\n\n  isSunk() {\n    return this.length === this.receivedHits;\n  }\n}\n","import events from '../utilities/events';\nimport Ship from './ship';\n\nconst SHIPS_PER_PLAYER = [\n  { length: 4 },\n  { length: 4 },\n  { length: 3 },\n  { length: 3 },\n  { length: 3 },\n  { length: 2 },\n  { length: 2 },\n  { length: 2 },\n  { length: 1 },\n];\n\nexport default class Gameboard {\n  constructor() {\n    this.grid = Array(100).fill(null);\n    // ships' indices must start from 1 because negative numbers are used to indicate a hit ship\n    this.ships = [null];\n  }\n\n  static* getCellsIndeces(start, direction, length) {\n    const end = direction === 'vertical' ? length * 10 + (start - 10) : start + length - 1;\n    if (direction === 'vertical') {\n      for (let i = start; i <= end; i += 10) {\n        yield i;\n      }\n    } else if (direction === 'horizontal') {\n      for (let i = start; i <= end; i++) {\n        yield i;\n      }\n    }\n  }\n\n  fillAdjacentCells(start, length, direction, value) {\n    // eslint-disable-next-line\n    for (const i of Gameboard.getCellsIndeces(start, direction, length)) {\n      this.grid[i] = value;\n    }\n  }\n\n  isValidPosition(start, length, direction, curShip = null) {\n    if (direction === 'horizontal' && (start % 10) + length > 10) return false;\n    if (direction === 'vertical' && length * 10 + (start - 10) > 99) return false;\n    // eslint-disable-next-line\n    for (const i of Gameboard.getCellsIndeces(start, direction, length)) {\n      if (i > 99 || i < 0) return false;\n      if (typeof this.grid[i] === 'number' && this.grid[i] !== curShip) return false;\n    }\n    return true;\n  }\n\n  placeShip({ cell, direction, length }) {\n    const shipIndex = this.ships.length;\n    this.ships.push({\n      ship: new Ship(length),\n      position: { cell, direction, length },\n    });\n    this.fillAdjacentCells(cell, length, direction, shipIndex);\n  }\n\n  updateGrid() {\n    this.ships.forEach((ship, i) => {\n      if (ship === null) return;\n      const { cell, direction, length } = ship.position;\n      this.fillAdjacentCells(cell, length, direction, i);\n    });\n  }\n\n  removeShip(shipIndex) {\n    if (!this.ships[shipIndex]) return;\n    const [{ position }] = this.ships.splice(shipIndex, 1);\n    const { cell, length, direction } = position;\n    this.fillAdjacentCells(cell, length, direction, null);\n    this.updateGrid();\n  }\n\n  changeShipPosition(prevCell, newCell) {\n    if (prevCell === newCell) return;\n    const shipIndex = this.grid[prevCell];\n    const { position: { direction, length } } = this.ships[shipIndex];\n    if (!this.isValidPosition(newCell, length, direction, shipIndex)) return;\n    this.removeShip(shipIndex);\n    this.placeShip({ cell: newCell, direction, length });\n  }\n\n  rotateShipAtCell(cellNum) {\n    const cellContent = this.grid[cellNum];\n    if (typeof cellContent !== 'number') return;\n    const { position: { length, direction, cell } } = this.ships[cellContent];\n    const newDirection = direction === 'horizontal' ? 'vertical' : 'horizontal';\n    if (!this.isValidPosition(cell, length, newDirection, cellContent)) {\n      events.emit('rotation invalid', null);\n      return;\n    }\n    this.removeShip(cellContent);\n    this.placeShip({ cell, direction: newDirection, length });\n  }\n\n  receiveAttack(cell) {\n    const cellContent = this.grid[cell];\n    if (Number.isInteger(cellContent)) {\n      // hit ship\n      const { ship } = this.ships[cellContent];\n      ship.hit();\n      this.grid[cell] = Math.abs(cellContent) * -1;\n      const shipSunk = ship.isSunk();\n      return { hitShip: true, shipSunk };\n    }\n    if (cellContent === null) {\n      // missed-shot\n      this.grid[cell] = '.';\n      return { hitShip: false };\n    }\n    return { hitShip: false };\n  }\n\n  reset() {\n    this.grid = Array(100).fill(null);\n    this.ships = [null];\n  }\n\n  isPlayableCell(cell) {\n    return this.grid[cell] === null || this.grid[cell] > 0;\n  }\n\n  isCellEmpty(cell) {\n    return this.grid[cell] === null;\n  }\n\n  areAllShipsDestroyed() {\n    return this.ships.slice(1).every(({ ship }) => ship.isSunk());\n  }\n\n  isThereAShipCloseTo(cell) {\n    const surroudingCells = [\n      cell + 1,\n      cell - 1,\n      cell + 10,\n      cell - 10,\n    ];\n    return surroudingCells.some((c) => typeof this.grid[c] === 'number');\n  }\n\n  getRandomPosition(length) {\n    let cell;\n    let direction;\n    do {\n      do {\n        cell = Math.floor(Math.random() * 100);\n      } while (!this.isCellEmpty(cell) || this.isThereAShipCloseTo(cell));\n      direction = Math.random() > 0.4 ? 'horizontal' : 'vertical';\n      if (!this.isValidPosition(cell, length, direction)) {\n        direction = direction === 'horizontal' ? 'vertical' : 'horizontal';\n      }\n    } while (!this.isValidPosition(cell, length, direction));\n    return { cell, length, direction };\n  }\n\n  placeShipsRandomly() {\n    SHIPS_PER_PLAYER.forEach((ship) => {\n      const position = this.getRandomPosition(ship.length);\n      this.placeShip(position);\n    });\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=window,s=i.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,o=`lit$${(Math.random()+\"\").slice(9)}$`,n=\"?\"+o,l=`<${n}>`,h=document,r=(t=\"\")=>h.createComment(t),d=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,u=Array.isArray,c=t=>u(t)||\"function\"==typeof(null==t?void 0:t[Symbol.iterator]),v=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,a=/-->/g,f=/>/g,_=RegExp(\">|[ \\t\\n\\f\\r](?:([^\\\\s\\\"'>=/]+)([ \\t\\n\\f\\r]*=[ \\t\\n\\f\\r]*(?:[^ \\t\\n\\f\\r\\\"'`<>=]|(\\\"|')|))|$)\",\"g\"),m=/'/g,p=/\"/g,$=/^(?:script|style|textarea|title)$/i,g=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),y=g(1),w=g(2),x=Symbol.for(\"lit-noChange\"),b=Symbol.for(\"lit-nothing\"),T=new WeakMap,A=h.createTreeWalker(h,129,null,!1),E=(t,i)=>{const s=t.length-1,n=[];let h,r=2===i?\"<svg>\":\"\",d=v;for(let i=0;i<s;i++){const s=t[i];let e,u,c=-1,g=0;for(;g<s.length&&(d.lastIndex=g,u=d.exec(s),null!==u);)g=d.lastIndex,d===v?\"!--\"===u[1]?d=a:void 0!==u[1]?d=f:void 0!==u[2]?($.test(u[2])&&(h=RegExp(\"</\"+u[2],\"g\")),d=_):void 0!==u[3]&&(d=_):d===_?\">\"===u[0]?(d=null!=h?h:v,c=-1):void 0===u[1]?c=-2:(c=d.lastIndex-u[2].length,e=u[1],d=void 0===u[3]?_:'\"'===u[3]?p:m):d===p||d===m?d=_:d===a||d===f?d=v:(d=_,h=void 0);const y=d===_&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=d===v?s+l:c>=0?(n.push(e),s.slice(0,c)+\"$lit$\"+s.slice(c)+o+y):s+o+(-2===c?(n.push(void 0),i):y)}const u=r+(t[s]||\"<?>\")+(2===i?\"</svg>\":\"\");if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return[void 0!==e?e.createHTML(u):u,n]};class C{constructor({strings:t,_$litType$:i},e){let l;this.parts=[];let h=0,d=0;const u=t.length-1,c=this.parts,[v,a]=E(t,i);if(this.el=C.createElement(v,e),A.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(l=A.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const i of l.getAttributeNames())if(i.endsWith(\"$lit$\")||i.startsWith(o)){const s=a[d++];if(t.push(i),void 0!==s){const t=l.getAttribute(s.toLowerCase()+\"$lit$\").split(o),i=/([.?@])?(.*)/.exec(s);c.push({type:1,index:h,name:i[2],strings:t,ctor:\".\"===i[1]?M:\"?\"===i[1]?k:\"@\"===i[1]?H:S})}else c.push({type:6,index:h})}for(const i of t)l.removeAttribute(i)}if($.test(l.tagName)){const t=l.textContent.split(o),i=t.length-1;if(i>0){l.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)l.append(t[s],r()),A.nextNode(),c.push({type:2,index:++h});l.append(t[i],r())}}}else if(8===l.nodeType)if(l.data===n)c.push({type:2,index:h});else{let t=-1;for(;-1!==(t=l.data.indexOf(o,t+1));)c.push({type:7,index:h}),t+=o.length-1}h++}}static createElement(t,i){const s=h.createElement(\"template\");return s.innerHTML=t,s}}function P(t,i,s=t,e){var o,n,l,h;if(i===x)return i;let r=void 0!==e?null===(o=s._$Co)||void 0===o?void 0:o[e]:s._$Cl;const u=d(i)?void 0:i._$litDirective$;return(null==r?void 0:r.constructor)!==u&&(null===(n=null==r?void 0:r._$AO)||void 0===n||n.call(r,!1),void 0===u?r=void 0:(r=new u(t),r._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Co)&&void 0!==l?l:h._$Co=[])[e]=r:s._$Cl=r),void 0!==r&&(i=P(t,r._$AS(t,i.values),r,e)),i}class V{constructor(t,i){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:h).importNode(s,!0);A.currentNode=o;let n=A.nextNode(),l=0,r=0,d=e[0];for(;void 0!==d;){if(l===d.index){let i;2===d.type?i=new N(n,n.nextSibling,this,t):1===d.type?i=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(i=new I(n,this,t)),this.u.push(i),d=e[++r]}l!==(null==d?void 0:d.index)&&(n=A.nextNode(),l++)}return o}p(t){let i=0;for(const s of this.u)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class N{constructor(t,i,s,e){var o;this.type=2,this._$AH=b,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cm=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=P(this,t,i),d(t)?t===b||null==t||\"\"===t?(this._$AH!==b&&this._$AR(),this._$AH=b):t!==this._$AH&&t!==x&&this.g(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):c(t)?this.k(t):this.g(t)}O(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==b&&d(this._$AH)?this._$AA.nextSibling.data=t:this.T(h.createTextNode(t)),this._$AH=t}$(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=C.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.p(s);else{const t=new V(o,this),i=t.v(this.options);t.p(s),this.T(i),this._$AH=t}}_$AC(t){let i=T.get(t.strings);return void 0===i&&T.set(t.strings,i=new C(t)),i}k(t){u(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new N(this.O(r()),this.O(r()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cm=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class S{constructor(t,i,s,e,o){this.type=1,this._$AH=b,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=b}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=P(this,t,i,0),n=!d(t)||t!==this._$AH&&t!==x,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=P(this,e[s+l],i,l),h===x&&(h=this._$AH[l]),n||(n=!d(h)||h!==this._$AH[l]),h===b?t=b:t!==b&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.j(t)}j(t){t===b?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class M extends S{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===b?void 0:t}}const R=s?s.emptyScript:\"\";class k extends S{constructor(){super(...arguments),this.type=4}j(t){t&&t!==b?this.element.setAttribute(this.name,R):this.element.removeAttribute(this.name)}}class H extends S{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=P(this,t,i,0))&&void 0!==s?s:b)===x)return;const e=this._$AH,o=t===b&&e!==b||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==b&&(e===b||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class I{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){P(this,t)}}const L={P:\"$lit$\",A:o,M:n,C:1,L:E,R:V,D:c,V:P,I:N,H:S,N:k,U:H,B:M,F:I},z=i.litHtmlPolyfillSupport;null==z||z(C,N),(null!==(t=i.litHtmlVersions)&&void 0!==t?t:i.litHtmlVersions=[]).push(\"2.6.1\");const Z=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new N(i.insertBefore(r(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l};export{L as _$LH,y as html,x as noChange,b as nothing,Z as render,w as svg};\n//# sourceMappingURL=lit-html.js.map\n","import { html } from 'lit-html';\n\nconst letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'];\nconst nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n\nfunction coordsLetters() {\n  return html`<div class=\"letter-coords\">\n    ${letters.map((l) => html`<div class=\"coord\">${l}</div>`)}\n  </div>`;\n}\n\nfunction coordsNums() {\n  return html`<div class=\"number-coords\">\n    ${nums.map((n) => html`<div class=\"coord\">${n}</div>`)}\n  </div>`;\n}\n\nexport { coordsLetters, coordsNums };\n","import events from '../utilities/events';\n\nexport default function attackEnemy(e) {\n  let cell = e.target.getAttribute('data-cell-number');\n  if (cell === null) return;\n  cell = Number(cell);\n  events.emit('attack enemy board', cell);\n}\n","import { html } from 'lit-html';\n\nexport default function gameboardCell(cellClass, cellNum, ship = '') {\n  return html`<div\n    class=${cellClass}\n    data-cell-number=${cellNum}>${ship}</div>`;\n}\n","import events from '../utilities/events';\n\nexport default function startGame() {\n  events.emit('start game', null);\n}\n","import { html, nothing } from 'lit-html';\nimport { coordsLetters, coordsNums } from './coords';\nimport attackEnemy from '../event-handlers/attack-enemy';\nimport gameboardCell from './cell';\nimport startGame from '../event-handlers/start-game';\n\nfunction cover() {\n  return html`<div class=\"cover\">\n    <button\n    @click=${startGame}\n    class=\"play-button\">Play</button>\n  </div>`;\n}\n\nexport default function enemyGameboard(boardState, ships, placementPhase) {\n  return html`<div>\n    <div\n    class=\"gameboard enemy\"\n    @click=${placementPhase ? nothing : attackEnemy}>\n    ${placementPhase ? cover() : ''}\n    ${coordsLetters()}\n    ${coordsNums()}\n    ${boardState.map((cell, i) => {\n    if (cell === '.') return gameboardCell('cell missed-shot', i);\n    if (cell === null || cell > 0) return gameboardCell('cell empty', i);\n    if (ships[Math.abs(cell)].ship.isSunk()) return gameboardCell('cell occupied hit sunk', i);\n    return gameboardCell('cell occupied hit', i);\n  })}\n  </div>\n  <div class=\"gameboard-label\">Opponent's grid</div>\n  </div>`;\n}\n","export default function isValidCell(cell) {\n  return (Number.isInteger(cell) && cell < 100 && cell >= 0);\n}\n","import events from '../utilities/events';\nimport isValidCell from '../utilities/isValidCell';\n\nlet ship = null;\nlet cellWidth = 0;\n\nfunction getCellNumber() {\n  const rect = ship.getBoundingClientRect();\n  const shipFrontCoordX = rect.left + cellWidth / 2;\n  const shipFrontCoordY = rect.top + cellWidth / 2;\n  const els = document.elementsFromPoint(shipFrontCoordX, shipFrontCoordY);\n  const cellNum = els.find((el) => el.hasAttribute('data-cell-number'));\n  return cellNum;\n}\n\nfunction drag(e) {\n  e.preventDefault();\n  ship.classList.add('dragging');\n  ship.style.top = `${parseInt(ship.style.top, 10) + e.movementY}px`;\n  ship.style.left = `${parseInt(ship.style.left, 10) + e.movementX}px`;\n}\n\nfunction drop() {\n  const cell = getCellNumber();\n  ship.classList.remove('dragging');\n  ship.style.zIndex = 5;\n  ship.style.top = '1px';\n  ship.style.left = '1px';\n  // eslint-disable-next-line\n  unbindEvents();\n  if (cell) {\n    const prevCell = Number(ship.parentElement.getAttribute('data-cell-number'));\n    const newCell = Number(cell.getAttribute('data-cell-number'));\n    if (prevCell === newCell) return;\n    if (isValidCell(prevCell) && isValidCell(newCell)) {\n      events.emit('change ship position', { prevCell, newCell });\n    }\n  }\n}\n\nfunction unbindEvents() {\n  window.removeEventListener('pointermove', drag);\n  window.removeEventListener('pointerup', drop);\n  document.body.removeEventListener('pointerleave', drop);\n}\n\nfunction bindEvents() {\n  window.addEventListener('pointermove', drag);\n  window.addEventListener('pointerup', drop);\n  document.body.addEventListener('pointerleave', drop);\n}\n\nfunction grab(e) {\n  e.preventDefault();\n  ship = e.target;\n  cellWidth = ship.parentElement.offsetWidth;\n  ship.style.zIndex = 10;\n  bindEvents();\n}\n\nexport default grab;\n","import events from '../utilities/events';\n\nlet poiterMoved = false;\nlet shipBeingRotated = null;\n\nevents.on('rotation invalid', () => {\n  const ship = shipBeingRotated;\n  ship.classList.add('shake');\n  setTimeout(() => {\n    ship.classList.remove('shake');\n  }, 800);\n});\n\nfunction preventRotation() {\n  poiterMoved = true;\n}\n\nfunction startRotation(e) {\n  e.target.addEventListener('pointermove', preventRotation);\n}\n\nfunction endRotation(e) {\n  e.target.removeEventListener('pointermove', preventRotation);\n  if (poiterMoved) {\n    poiterMoved = false;\n    return;\n  }\n  shipBeingRotated = e.target;\n  const els = document.elementsFromPoint(e.clientX, e.clientY);\n  const cell = els.find((el) => el.hasAttribute('data-cell-number'));\n  if (!cell) return;\n  const cellNum = Number.parseInt(cell.getAttribute('data-cell-number'), 10);\n  events.emit('rotate ship at cell', cellNum);\n  poiterMoved = false;\n}\n\nexport { startRotation, endRotation };\n","import { html } from 'lit-html';\nimport grab from '../event-handlers/drag-and-drop';\nimport { startRotation, endRotation } from '../event-handlers/rotate-ship';\n\nexport default function draggableShip({ length, direction }) {\n  return html`<div\n  @pointerdown=${(e) => {\n    grab(e);\n    startRotation(e);\n  }}\n  @pointerup=${endRotation}\n  class=\"ship ${direction}\"\n  style=\"${direction === 'horizontal' ? 'width' : 'height'}: calc(${length * 100}% - 3px);\n  top: 1px; left: 1px;\"\n  ></div>`;\n}\n","import events from '../utilities/events';\n\nexport default function randomise() {\n  events.emit('randomise', null);\n}\n","import { html, nothing } from 'lit-html';\nimport gameboardCell from './cell';\nimport { coordsLetters, coordsNums } from './coords';\nimport draggableShip from './draggable-ship';\nimport staticShip from './static-ship';\nimport randomise from '../event-handlers/randomise';\n\nfunction label() {\n  return html`<div class=\"gameboard-label\">Your grid</div>`;\n}\n\nfunction boardButtons() {\n  return html`<div class=\"gameboard-options\">\n    <button @click=${randomise}>Randomise</button>\n  </div>`;\n}\n\nexport default function playerGameboard(boardState, ships, arrangingShips) {\n  const renderedShips = [];\n  return html`<div>\n    <div class=\"gameboard player\">\n      ${coordsLetters()}\n      ${coordsNums()}\n      ${boardState.map((cell, i) => {\n    if (cell === '.') return gameboardCell('cell missed-shot', i);\n    if (cell === null) return gameboardCell('cell empty', i);\n    if (cell > 0 && renderedShips.includes(cell)) return gameboardCell('cell occupied', i);\n    if (cell < 0 && renderedShips.includes(Math.abs(cell))) {\n      return gameboardCell('cell occupied hit', i);\n    }\n    renderedShips.push(Math.abs(cell));\n    const { position } = ships[Math.abs(cell)];\n    const ship = arrangingShips ? draggableShip(position) : staticShip(position);\n    if (cell > 0) return gameboardCell('cell occupied', i, ship);\n    return gameboardCell('cell occupied hit', i, ship);\n  })}\n  </div>\n  ${label()}\n  ${arrangingShips ? boardButtons() : nothing}\n  </div>`;\n}\n","import { render } from 'lit-html';\nimport enemyGameboard from '../templates/enemy-gameboard';\nimport playerGameboard from '../templates/player-gameboard';\nimport events from '../utilities/events';\nimport isValidCell from '../utilities/isValidCell';\n\nconst gameBoardContainerOne = document.querySelector('#left-container');\nconst gameBoardContainerTwo = document.querySelector('#right-container');\n\nfunction reportWinner(player) {\n  events.emit('winner', player);\n}\n\nfunction isLoser(player) {\n  return player.gameboard.areAllShipsDestroyed();\n}\n\nfunction attack(player, cell) {\n  return player.gameboard.receiveAttack(cell);\n}\n\nexport default class Game {\n  constructor(playerOne, playerTwo) {\n    this.playerOne = playerOne;\n    this.playerTwo = playerTwo;\n    this.gameOver = false;\n    this.arrangingShips = true;\n    this.turn = playerOne;\n    this.render();\n  }\n\n  randomise(player) {\n    player.gameboard.reset();\n    player.gameboard.placeShipsRandomly();\n    this.render();\n  }\n\n  startBattle() {\n    this.arrangingShips = false;\n    this.render();\n  }\n\n  endGame() {\n    this.gameOver = true;\n    this.turn = null;\n  }\n\n  changeTurn() {\n    this.turn = this.turn === this.playerOne ? this.playerTwo : this.playerOne;\n  }\n\n  play(cell) {\n    if (typeof cell !== 'number') this.endGame();\n    if (this.gameOver) return {};\n    if (!isValidCell(cell)) return {};\n    const target = this.turn === this.playerOne ? this.playerTwo : this.playerOne;\n    if (!target.gameboard.isPlayableCell(cell)) return {};\n    const attackResult = attack(target, cell);\n    if (!attackResult.hitShip) this.changeTurn();\n    if (isLoser(target)) {\n      reportWinner(this.turn);\n      this.endGame();\n    }\n    this.render();\n    return attackResult;\n  }\n\n  isValidMove(cell) {\n    return (Number.isInteger(cell)\n    && cell < 100 && cell >= 0\n    && this.playerTwo.gameboard.isPlayableCell(cell));\n  }\n\n  changePlayerShipPosition(prevCell, newCell) {\n    this.playerOne.gameboard.changeShipPosition(prevCell, newCell);\n    this.render();\n  }\n\n  rotatePlayerShip(cell) {\n    this.playerOne.gameboard.rotateShipAtCell(cell);\n    this.render();\n  }\n\n  render() {\n    const boardOne = playerGameboard(\n      this.playerOne.gameboard.grid,\n      this.playerOne.gameboard.ships,\n      this.arrangingShips,\n    );\n    const boardTwo = enemyGameboard(\n      this.playerTwo.gameboard.grid,\n      this.playerTwo.gameboard.ships,\n      this.arrangingShips,\n    );\n    render(boardOne, gameBoardContainerOne);\n    render(boardTwo, gameBoardContainerTwo);\n  }\n}\n","import { html } from 'lit-html';\n\nexport default function staticShip({ length, direction }) {\n  return html`<div\n  class=\"ship ${direction}\"\n  style=\"${direction === 'horizontal' ? 'width' : 'height'}: calc(${length * 100}% - 3px);\n  top: 1px; left: 1px;\"\n  ></div>`;\n}\n","export default class Player {\n  constructor(id, gameboard) {\n    this.id = id;\n    this.gameboard = gameboard;\n  }\n}\n","function shuffle(array) {\n  const arr = [...array];\n  for (let i = arr.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n  }\n  return arr;\n}\n\nfunction getUnorderListOfSlots(numOfSlots) {\n  const slots = [];\n  for (let i = 0; i < numOfSlots; i++) {\n    slots.push(i);\n  }\n  return shuffle(slots);\n}\n\nfunction getAdjecentSlots(slot) {\n  const adjacentSlots = [];\n  if (slot > 9) adjacentSlots.push(slot - 10);\n  if (slot < 90) adjacentSlots.push(slot + 10);\n  if (slot % 10 < 9) adjacentSlots.push(slot + 1);\n  if (slot % 10 > 0) adjacentSlots.push(slot - 1);\n  return adjacentSlots;\n}\n\nexport default class Moves {\n  constructor() {\n    this.slots = getUnorderListOfSlots(100);\n    this.target = null;\n  }\n\n  next() {\n    if (this.target) return this.attackTarget();\n    return this.randomMove();\n  }\n\n  randomMove() {\n    return this.slots.pop();\n  }\n\n  attackTarget() {\n    const { hitsRecord } = this.target;\n\n    if (hitsRecord.length === 1) {\n      // target has received just one shot, thus its direction is unknown\n      const slot = hitsRecord[0];\n      const adjacentSlots = getAdjecentSlots(slot);\n      const moveIndex = this.slots.findIndex((s) => adjacentSlots.includes(s));\n      if (moveIndex === -1) {\n        this.clearTarget();\n        return this.randomMove();\n      }\n      const move = this.slots.splice(moveIndex, 1)[0];\n      return move;\n    }\n\n    // target has received more than one shot, thus it is possible to deduce its direciton\n    if (Math.abs(hitsRecord[0] - hitsRecord[1]) === 1) {\n      // target's direction is horizontal\n      const rightMostSlot = hitsRecord[hitsRecord.length - 1];\n      const leftMostSlot = hitsRecord[0];\n      if (rightMostSlot % 10 !== 9 && this.slots.includes(rightMostSlot + 1)) {\n        const slot = rightMostSlot + 1;\n        this.removeFromAvailableSlots(slot);\n        return slot;\n      }\n      if (leftMostSlot % 10 !== 0 && this.slots.includes(leftMostSlot - 1)) {\n        const slot = leftMostSlot - 1;\n        this.removeFromAvailableSlots(slot);\n        return slot;\n      }\n    }\n\n    // target's direction must be vertical\n    const topMostSlot = hitsRecord[0];\n    const bottomMostSlots = hitsRecord[hitsRecord.length - 1];\n    if (topMostSlot > 9 && this.slots.includes(topMostSlot - 10)) {\n      const slot = topMostSlot - 10;\n      this.removeFromAvailableSlots(slot);\n      return slot;\n    }\n    if (bottomMostSlots < 90 && this.slots.includes(bottomMostSlots + 10)) {\n      const slot = bottomMostSlots + 10;\n      this.removeFromAvailableSlots(slot);\n      return slot;\n    }\n\n    this.clearTarget();\n    return this.randomMove();\n  }\n\n  removeFromAvailableSlots(slot) {\n    const index = this.slots.findIndex((s) => s === slot);\n    return this.slots.splice(index, 1)[0];\n  }\n\n  successfulShot(slot) {\n    if (!this.target) {\n      this.setTarget(slot);\n      return;\n    }\n    this.target.hitsRecord.push(slot);\n    this.target.hitsRecord.sort();\n  }\n\n  setTarget(slot) {\n    this.target = {\n      hitsRecord: [slot],\n    };\n  }\n\n  clearTarget() {\n    this.target = null;\n  }\n}\n","import Moves from '../utilities/getNextMove';\n\nexport default class ComputerPlayer {\n  constructor(id, gameboard) {\n    /* the unorder array allows ComputerPlayer to make random attacks\n      and don't repeat previous attacks */\n    this.attacks = new Moves();\n    this.id = id;\n    this.gameboard = gameboard;\n  }\n\n  hitsEnemyShip(slot) {\n    this.attacks.successfulShot(slot);\n  }\n\n  nextMove() {\n    return this.attacks.next();\n  }\n}\n","import Gameboard from './gameboard';\nimport Game from './game';\nimport Player from './player';\nimport ComputerPlayer from './computer-player';\n\nexport default class GameAgainstComputer extends Game {\n  constructor() {\n    super(\n      new Player('Player one', new Gameboard()),\n      new ComputerPlayer('Computer Player', new Gameboard()),\n    );\n  }\n\n  playRound(cell) {\n    this.play(cell);\n    this.computerPlay();\n  }\n\n  computerPlay() {\n    setTimeout(() => {\n      if (this.turn !== this.playerTwo) return;\n      const nextMove = this.playerTwo.nextMove();\n      const attackResult = this.play(nextMove);\n      if (attackResult.hitShip) {\n        this.playerTwo.hitsEnemyShip(nextMove);\n      }\n      if (this.turn === this.playerTwo) {\n        this.computerPlay();\n      }\n    }, 200);\n  }\n}\n","import './styles/styles.css';\nimport events from './utilities/events';\nimport GameAgainstComputer from './modules/game-against-computer';\n\nlet game = null;\n\nfunction setupNewGame() {\n  game = new GameAgainstComputer();\n  game.randomise(game.playerOne);\n  game.randomise(game.playerTwo);\n}\n\nwindow.addEventListener('load', setupNewGame);\n\nevents.on('attack enemy board', (cell) => {\n  game.playRound(cell);\n});\n\nevents.on('change ship position', ({ prevCell, newCell }) => {\n  game.changePlayerShipPosition(prevCell, newCell);\n});\n\nevents.on('rotate ship at cell', (cell) => {\n  game.rotatePlayerShip(cell);\n});\n\nevents.on('start game', () => {\n  game.startBattle();\n});\n\nevents.on('randomise', () => {\n  game.randomise(game.playerOne);\n});\n\nevents.on('hit player ship', (slot) => {\n  game.playerTwo.hitsEnemyShip(slot);\n});\n"],"names":["events","on","eventName","fn","this","push","off","i","length","splice","emit","data","forEach","Ship","constructor","receivedHits","hit","isSunk","SHIPS_PER_PLAYER","Gameboard","grid","Array","fill","ships","static","start","direction","end","fillAdjacentCells","value","getCellsIndeces","isValidPosition","curShip","placeShip","cell","shipIndex","ship","position","updateGrid","removeShip","changeShipPosition","prevCell","newCell","rotateShipAtCell","cellNum","cellContent","newDirection","receiveAttack","Number","isInteger","Math","abs","hitShip","shipSunk","reset","isPlayableCell","isCellEmpty","areAllShipsDestroyed","slice","every","isThereAShipCloseTo","some","c","getRandomPosition","floor","random","placeShipsRandomly","t","window","s","trustedTypes","e","createPolicy","createHTML","o","n","l","h","document","r","createComment","d","u","isArray","v","a","f","_","RegExp","m","p","$","g","_$litType$","strings","values","y","x","Symbol","for","b","T","WeakMap","A","createTreeWalker","E","lastIndex","exec","test","startsWith","hasOwnProperty","Error","C","parts","el","createElement","currentNode","content","firstChild","remove","append","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","toLowerCase","split","type","index","name","ctor","M","k","H","S","removeAttribute","tagName","textContent","emptyScript","indexOf","innerHTML","P","_$Co","_$Cl","_$litDirective$","_$AO","call","_$AT","_$AS","V","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","N","nextSibling","I","_$AI","_$AH","_$AA","_$AB","options","_$Cm","isConnected","startNode","endNode","_$AR","iterator","O","insertBefore","createTextNode","_$AC","get","set","_$AP","setConnected","element","String","j","setAttribute","super","arguments","R","capture","once","passive","removeEventListener","addEventListener","handleEvent","host","z","litHtmlPolyfillSupport","litHtmlVersions","Z","renderBefore","_$litPart$","letters","nums","coordsLetters","map","coordsNums","attackEnemy","target","gameboardCell","cellClass","startGame","cover","enemyGameboard","boardState","placementPhase","isValidCell","cellWidth","drag","preventDefault","classList","add","style","top","parseInt","movementY","left","movementX","drop","rect","getBoundingClientRect","shipFrontCoordX","shipFrontCoordY","elementsFromPoint","find","hasAttribute","getCellNumber","zIndex","body","parentElement","poiterMoved","shipBeingRotated","preventRotation","endRotation","clientX","clientY","draggableShip","offsetWidth","startRotation","randomise","boardButtons","setTimeout","gameBoardContainerOne","querySelector","gameBoardContainerTwo","Game","playerOne","playerTwo","gameOver","arrangingShips","turn","render","player","gameboard","startBattle","endGame","changeTurn","play","attackResult","attack","isValidMove","changePlayerShipPosition","rotatePlayerShip","boardOne","renderedShips","includes","staticShip","playerGameboard","boardTwo","Player","id","Moves","slots","numOfSlots","array","arr","shuffle","getUnorderListOfSlots","next","attackTarget","randomMove","pop","hitsRecord","adjacentSlots","slot","getAdjecentSlots","moveIndex","findIndex","clearTarget","rightMostSlot","leftMostSlot","removeFromAvailableSlots","topMostSlot","bottomMostSlots","successfulShot","sort","setTarget","ComputerPlayer","attacks","hitsEnemyShip","nextMove","GameAgainstComputer","playRound","computerPlay","game"],"sourceRoot":""}